<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Sketchboard revised</title>
	<style type="text/css">
		
	</style>
	<script src="/node_modules/socket.io-client/socket.io.js"></script>
</head>
<body>
	<!-- <div>
		Create a room
		<input class="roomname" placeholder="Enter a room name here" />
		<button class="createRoom">Create a room </button>

	</div> -->

	<div>
		join a room
		<button class="r1">room 1</button>
		<button class="r2">room 2</button>
	</div>

<script type="text/javascript">
	let socket = io();

	// document.querySelector('.createRoom').addEventListener('click', (e)=>{
	// 	if(document.querySelector('.roomname').value !== ""){
	// 		let roomname = document.querySelector('.roomname').value;
	// 		console.log(roomname);
	// 		socket.emit('createroom', {"roomname": roomname});
	// 	}
	// });

	// document.querySelector('.r1').addEventListener('click', (e)=>{
	// 	socket.emit('createroom', {"roomname": "room1"})
	// })

	// socket.on('createroom', (json)=>{
	// 	let name = json.roomname;
	// 	console.log(name)
	// 	let chatroomsocket = io('/'+name);
	// 	// chatroomsocket.on()
	// });

	document.querySelector('.r1').addEventListener('click', (e)=>{
		let xmlhttpreq = new XMLHttpRequest();

		xmlhttpreq.onreadystatechange = ()=>{
			if(xmlhttpreq.readyState === XMLHttpRequest.DONE && xmlhttpreq.status === 200){
				console.log(xmlhttpreq.responseURL);
				window.location.replace(xmlhttpreq.responseURL);
			}
		}

		xmlhttpreq.open("GET", "http://localhost:8080/join");
		xmlhttpreq.setRequestHeader("roomname", "room1");
		xmlhttpreq.send();
	});

	document.querySelector('.r2').addEventListener('click', (e)=>{
		let xmlhttpreq = new XMLHttpRequest();

		xmlhttpreq.onreadystatechange = ()=>{
			if(xmlhttpreq.readyState === XMLHttpRequest.DONE && xmlhttpreq.status === 200){
				console.log(xmlhttpreq.responseURL);
				window.location.replace(xmlhttpreq.responseURL);
			}
		}

		xmlhttpreq.open("GET", "http://localhost:8080/join");
		xmlhttpreq.setRequestHeader("roomname", "room2");
		xmlhttpreq.send();
	});



</script>

</body>
</html>